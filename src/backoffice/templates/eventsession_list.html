{% extends 'base.html' %}
{% load commonmark %}
{% load static %}
{% load bornhack %}

{% block extra_head %}
<script src="{% static "js/jquery.dataTables.min.js" %}"></script>
<link rel="stylesheet" href="{% static 'css/jquery.dataTables.min.css' %}">
{% endblock extra_head %}

{% block content %}
<div class="panel panel-default">
  <div class="panel-heading">
    <span class="h3">BackOffice - EventSessions</span>
  </div>
  <div class="panel-body">
    <p><i>EventSessions</i> define periods where EventInstances a certain EventType can be scheduled. They are used in the following ways in the system:</p>
    <ul>
      <li>To customise the speaker availability form shown when users submit speakers
      <li>They are also used to warn (but not restrict) if Content Team schedules something outside of an existing EventSession.
      <li>They are also used by the autoscheduler to create slots for scheduling
    </ul>
    <p>Search for an Event Type or Location to filter the list.</p>
  {% if not eventsession_list %}
      <p class="lead">
        No EventSessions found. Go create one!
        <a href="{% url 'backoffice:eventsession_typeselect' camp_slug=camp.slug %}" class="btn btn-success"><i class="fas fa-plus"></i> Create New EventSession</a>
      </p>
  {% else %}
  <p>
    <a class="btn btn-success" href="{% url 'backoffice:eventsession_typeselect' camp_slug=camp.slug %}"><i class="fas fa-plus"></i> Create New EventSession</a>
    <a class="btn btn-default" href="{% url 'backoffice:index' camp_slug=camp.slug %}"><i class="fas fa-undo"></i> Backoffice</a>
  </p>
  <table class="table table-hover">
    <thead>
    <tr>
        <th>Session Start</th>
        <th>Session End</th>
        <th class="text-center">Session Duration</th>
        <th>Session Description</th>
        <th class="text-center">Event Instances</th>
        <th class="text-center">Free Time</th>
        <th>Event Type</th>
        <th>Event Location</th>
        <th>Action</th>
     </tr>
    </thead>
    <tbody>
    {% for session in eventsession_list %}
    <tr>
        <td>{{ session.when.lower }}</td>
        <td>{{ session.when.upper }}</td>
        <td class="text-center">{{ session.duration }}</td>
        <td>{{ session.description|default:"N/A" }}</td>
        <td class="text-center">{{ session.event_count }}</td>
        <td class="text-center">{{ session.free_time }}</td>
        <td><i class="fas fa-{{ session.event_type.icon }}" style="color: {{ session.event_type.color }};"></i> {{ session.event_type }}</td>
        <td><i class="fas fa-{{ session.event_location.icon }}"></i> {{ session.event_location.name }}</td>
        <td>
          <div class="btn-group-vertical">
            <a href="{% url 'backoffice:eventsession_detail' camp_slug=camp.slug pk=session.id %}" class="btn btn-primary"><i class="fas fa-search"></i> Details</a>
            <a href="{% url 'backoffice:eventsession_update' camp_slug=camp.slug pk=session.id %}" class="btn btn-primary"><i class="fas fa-edit"></i> Update</a>
            <a href="{% url 'backoffice:eventsession_delete' camp_slug=camp.slug pk=session.id %}" class="btn btn-danger"><i class="fas fa-times"></i> Delete</a>
          </div>
        </td>
    </tr>
    {% endfor %}
    </tbody>
  </table>
  {% endif %}
  <p>
    <a class="btn btn-success" href="{% url 'backoffice:eventsession_typeselect' camp_slug=camp.slug %}"><i class="fas fa-plus"></i> Create New Session</a>
    <a class="btn btn-default" href="{% url 'backoffice:index' camp_slug=camp.slug %}"><i class="fas fa-undo"></i> Backoffice</a>
  </p>
  </div>
</div>
{% endblock content %}
